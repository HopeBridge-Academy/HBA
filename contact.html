<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="contactTitle">Contact - HopeBridge Academy</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/i18next@21.6.10/dist/umd/i18next.min.js"></script>
    <script src="i18n.js" defer></script>
</head>
<body onload="initializePage()">
    <header>
        <nav aria-label="Main navigation">
            <ul class="nav-list">
                <li><img src="./logo.png" height="90" alt="HopeBridge Academy Logo" class="logo"></li>
                <li><a href="index.html" data-i18n="home">Home</a></li>
                <li><a href="register.html" data-i18n="register">Register</a></li>
                <li><a href="contact.html" data-i18n="contact" aria-current="page">Contact</a></li>
                <li><a href="tutor.html" data-i18n="tutor">Request Tutor</a></li>
                <li><a href="donation.html" data-i18n="donation">Donation</a></li>
                <li><a href="certification.html" data-i18n="certification">Certification</a></li>
                <li class="auth-link"><a href="login.html" id="auth-link" data-i18n="login">Staff Portal</a></li>
            </ul>
            <div class="language-switcher">
                <label for="language-select" data-i18n="languageLabel">Language:</label>
                <select id="language-select" onchange="changeLanguage(this.value)" aria-label="Select language">
                    <option value="en" data-i18n="englishOption">English</option>
                    <option value="fa" data-i18n="persianOption">ŸÅÿßÿ±ÿ≥€å</option>
                </select>
            </div>
        </nav>
    </header>
    <main>
        <h1 data-i18n="contactHeading">Contact Us</h1>
        <section class="contact-form" aria-labelledby="contact-form-heading">
            <h2 id="contact-form-heading" data-i18n="contactFormHeading">Send Us a Message</h2>
            <form id="contact-form" method="POST" class="modern-form">
                <input type="hidden" name="sheetName" value="ContactMessages">
                <label for="name" data-i18n="nameLabel">Name:</label>
                <input type="text" id="name" name="name" data-i18n-placeholder="namePlaceholder" required>
                <label for="email" data-i18n="emailLabel">Email:</label>
                <input type="email" id="email" name="email" data-i18n-placeholder="emailPlaceholder" required>
                <label for="message" data-i18n="messageLabel">Message:</label>
                <textarea id="message" name="message" data-i18n-placeholder="messagePlaceholder" required></textarea>
                <button type="submit" data-i18n="submit">Send</button>
            </form>
        </section>
        <section class="contact-details" aria-labelledby="contact-details-heading">
            <h2 id="contact-details-heading" data-i18n="contactDetailsHeading">Our Contact Information</h2>
            <p><span data-i18n="locationLabel">Location:</span> <span data-i18n="locationText">Herat, Afghanistan</span></p>
            <p><span data-i18n="phoneLabel">Phone:</span> <span data-i18n="phoneText">+93-747-903-369</span></p>
            <p><span data-i18n="emailLabel">Email:</span> <a href="mailto:hopebridgeacademy@gmail.com" data-i18n="emailText">hopebridgeacademy@gmail.com</a></p>
        </section>
    </main>
    <footer>
        <a href="https://www.facebook.com/profile.php?id=61576355386024"><img src="./facebook.png" alt="Facebook Link" height="30" class="social-icon"></a>
        <p data-i18n="copyright">¬© 2025 HopeBridge Academy</p>
    </footer>
    <script src="script.js" defer></script>
    <script>
        // Handle form submission to Telegram
        document.getElementById('contact-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const token = "7637224975:AAH7Al4buvRmfwW3LUZ-REvloF9rZgoAStU"; // Your Telegram Bot Token
            const chatId = "-1002886209903"; // Your Telegram Chat ID

            const formData = new FormData(this);
            const data = {
                name: formData.get('name') || 'N/A',
                email: formData.get('email') || 'N/A',
                message: formData.get('message') || 'N/A'
            };

            // Truncate long inputs to avoid exceeding Telegram's 4096-character limit
            const truncate = (str, max) => str.length > max ? str.slice(0, max) + '...' : str;
            const telegramMessage = `
üì© Ÿæ€åÿßŸÖ ÿ¨ÿØ€åÿØ ÿßÿ≤ ÿ™ŸÖÿßÿ≥ ÿ¢⁄©ÿßÿØŸÖ€å ŸáŸàŸæ‚Äåÿ®ÿ±€åÿ¨
ŸÜÿßŸÖ: ${truncate(data.name, 100)}
ÿß€åŸÖ€åŸÑ: ${truncate(data.email, 200)}
Ÿæ€åÿßŸÖ: ${truncate(data.message, 3500)}
            `;

            const url = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(telegramMessage)}`;

            fetch(url)
                .then(response => response.json())
                .then(result => {
                    if (result.ok) {
                        alert(i18next.t('submitSuccess', 'Message sent successfully!'));
                        this.reset();
                    } else {
                        console.error('Telegram API Error:', result);
                        alert(i18next.t('submitError', 'Error sending message: ') + (result.description || 'Unknown error. Check console for details.'));
                    }
                })
                .catch(error => {
                    console.error('Fetch Error:', error);
                    alert(i18next.t('submitError', 'Error: Network issue or invalid setup. Please check console.'));
                });
        });
    </script>
</body>
</html>
